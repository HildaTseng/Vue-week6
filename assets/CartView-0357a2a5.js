import{_ as g,o as c,c as r,d as t,F as i,f as p,g as m,t as o,b as f,h as x,v as C}from"./index-7e514c5e.js";const{VITE_URL:u,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"hilda88",BASE_URL:"/Vue-week6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{productID:"",cart:{},loadingItem:""}},methods:{getCarts(){this.$http.get(`${u}/v2/api/${h}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.response.data.message)})},updateCart(e){this.loadingItem=e.id;const l={product_id:e.product.id,qty:e.qty};this.$http.put(`${u}/v2/api/${h}/cart/${e.id}`,{data:l}).then(d=>{alert(d.data.message),this.getCarts(),this.loadingItem=""}).catch(d=>{alert(d.response.data.message)})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${u}/v2/api/${h}/cart/${e.id}`).then(l=>{alert(l.data.message),this.loadingItem="",this.getCarts()}).catch(l=>{alert(l.response.data.message)})}},mounted(){this.getCarts()}},b=t("h2",null,"購物車頁面",-1),v={class:"table align-middle"},V=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),y=["onClick","disabled"],$=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),k={class:"input-group input-group-sm"},E=["onUpdate:modelValue","disabled","onChange"],T=["value"],D={class:"text-end"},U=t("td",{colspan:"3",class:"text-end"},"總計",-1),q={class:"text-end"},w=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),B={class:"text-end text-success"};function L(e,l,d,R,n,_){return c(),r(i,null,[b,t("table",v,[V,t("tbody",null,[n.cart.carts?(c(!0),r(i,{key:0},p(n.cart.carts,s=>(c(),r("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>_.deleteCartItem(s),disabled:s.id===n.loadingItem},[$,f(" x ")],8,y)]),t("td",null,o(s.product.title),1),t("td",null,[t("div",k,[x(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>s.qty=a,disabled:s.id===n.loadingItem,onChange:a=>_.updateCart(s)},[(c(),r(i,null,p(10,a=>t("option",{value:a,key:`${a}12`},o(a),9,T)),64))],40,E),[[C,s.qty]])])]),t("td",D,o(s.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[U,t("td",q,o(n.cart.total),1)]),t("tr",null,[w,t("td",B,o(n.cart.final_total),1)])])])],64)}const N=g(I,[["render",L]]);export{N as default};
